!function(){"use strict";
/**
	 * @copyright 2023 Chris Zuber <admin@kernvalley.us>
	 */const e=window.customElements instanceof Object;
/**
	 * @copyright 2023 Chris Zuber <admin@kernvalley.us>
	 */
const t=(e,t,n)=>{return"number"==typeof(r=t)&&!Number.isNaN(r)&&t>=e&&t<=n;var r},n=(e,t,n)=>Math.min(n,Math.max(e,t))
/**
	 * @copyright 2023 Chris Zuber <admin@kernvalley.us>
	 */;const r=function(){const e=document.createElement("div"),t={nativeSignal:"AbortController"in globalThis&&AbortController.prototype.hasOwnProperty("signal"),signal:!1,passive:!1,capture:!1,once:!1},n={get passive(){t.passive=!0},get signal(){t.signal=!0},get capture(){t.capture=!0},get once(){t.once=!0}};try{e.addEventListener("click",null,n),e.removeEventListener("click",null,n)}catch(e){console.error(e)}return Object.seal(t)}();function i(e,t,n,{capture:i,once:o,passive:s,signal:a}={}){a instanceof EventTarget&&a.aborted||(e.addEventListener(t,n,{capture:i,once:o,passive:s,signal:a}),!1===r.signal&&a instanceof EventTarget&&w(a).finally((()=>e.removeEventListener(t,n,{capture:i,once:o,passive:s,signal:a}))))}
/**
	 * @copyright 2023 Chris Zuber <admin@kernvalley.us>
	 */function o(e,t,n,{policy:r}={}){switch(i=e.tagName,o=t,a()?trustedTypes.getPropertyType(i.toLowerCase(),o):null){case"TrustedScript":e[t]=g(n,{policy:r});break;case"TrustedScriptURL":e[t]=m(n,{policy:r});break;case"TrustedHTML":e[t]=d(n,{policy:r});break;default:e[t]=n}var i,o}function s(e,t,n,{elementNs:r,policy:i}={}){switch(function(e,t,n){return a()?trustedTypes.getAttributeType(e.toLowerCase(),t,n):null}(e.tagName,t,r)){case"TrustedScriptURL":"string"==typeof r?e.setAttributeNs(r,t,m(n,{policy:i})):e.setAttribute(t,m(n,{policy:i}));break;case"TrustedScript":"string"==typeof r?e.setAttributeNS(r,t,g(n,{policy:i})):e.setAttribute(t,g(n,{policy:i}));break;case"TrustedHTML":"string"==typeof r?e.setAttributeNS(r,t,d(n,{policy:i})):e.setAttribute(t,d(n,{policy:i}));break;default:"string"==typeof r?e.setAttributeNS(r,t,n):e.setAttribute(t,n)}}function a(){return"trustedTypes"in globalThis&&trustedTypes instanceof EventTarget&&trustedTypes.createPolicy instanceof Function}function c(e){return"TrustedTypePolicy"in globalThis&&e instanceof TrustedTypePolicy||null!=e&&e.createHTML instanceof Function}function l(e){return a()?trustedTypes.isHTML(e):"string"==typeof e}function u(e){return a()?trustedTypes.isScriptURL(e):"string"==typeof e||e instanceof URL}function p(e){return!a()||(trustedTypes.isHTML(e)||trustedTypes.isScript(e)||trustedTypes.isScriptURL(e))}function d(e,{policy:t=f()}={}){return c(t)&&!l(e)?t.createHTML(e):e}function g(e,{policy:t=f()}={}){return c(t)&&!function(e){return a()?trustedTypes.isScript(e):"string"==typeof e}(e)?t.createScript(e):e}function m(e,{policy:t=f()}={}){return c(t)&&!u(e)?t.createScriptURL(e):e}function f(){return a()?trustedTypes.defaultPolicy:null}
/**
	 * @copyright 2021-2023 Chris Zuber <admin@kernvalley.us>
	 */const h=["loading","interactive","complete"],y=(e=document.readyState)=>h.indexOf(e);async function b(e,{signal:t}={}){const{resolve:n,reject:r,promise:i}=A(),o=y(e);if(t instanceof AbortSignal&&t.aborted)r(t.reason||new DOMException("Operation aborted."));else if(o<0)r(new DOMException(`Invalid state: ${e}`));else if(o>y()){const i=new AbortController;let o=!1;i.signal.addEventListener("abort",(({target:e})=>{o||(r(e.reason||new DOMException("Operation aborted.")),o=!0)}),{once:!0}),t instanceof AbortSignal&&t.addEventListener("abort",(({target:e})=>{i.abort(e.reason)}),{once:!0,signal:i.signal}),document.addEventListener("readystatechange",(()=>{document.readyState===e&&(n(),o=!0,i.abort())}),{signal:i.signal})}else n();return i}async function w(e){const{reject:t,promise:n}=A();return e instanceof AbortController?w(e.signal):(e instanceof EventTarget?e.aborted?t(e.reason):e.addEventListener("abort",(({target:e})=>t(e.reason)),{once:!0}):t(new DOMException("Not an AbortSignal")),n)}
/**
	 * @copyright 2023 Chris Zuber <admin@kernvalley.us>
	 */function v(e){return e instanceof Function&&"AsyncFunction"===e.constructor.name}function A({signal:e}={}){const t={};return t.promise=new Promise(((e,n)=>{t.resolve=e,t.reject=n})),e instanceof EventTarget&&e.throwIfAborted instanceof Function&&(e.aborted?t.reject(e.reason):e.addEventListener("abort",(({target:e})=>t.reject(e.reason)),{once:!0})),Object.seal(t)}async function E(e,t=[],{thisArg:n=globalThis,signal:r}={}){const{promise:i,resolve:o,reject:s}=A({signal:r});return e instanceof Function?Array.isArray(t)?r instanceof AbortSignal&&r.aborted?s(r.reason):v(e)?e.call(n,t).then(o).catch(s):queueMicrotask((()=>{try{o(e.call(n,t))}catch(e){s(e)}})):s(new TypeError("`args` must be an array")):s(new TypeError("`callAsAsync` expects callback to be a function")),await i}async function k(e,t,{thisArg:n=globalThis,args:r=[],mode:i="exclusive",ifAvailable:o=!1,steal:s=!1,allowFallback:a=!0,signal:c}={}){return!a||await async function(){if("locks"in navigator)try{return await navigator.locks.request("lock-test",(()=>!0))}catch(e){return!1}}()?await navigator.locks.request(e,{mode:i,ifAvailable:o,steal:s,signal:c},(async e=>{if(e)return await E(t,[e,...r],{thisArg:n,signal:c})})):await E(t,[null,...r],{signal:c,thisArg:n})}
/**
	 * @copyright 2023 Chris Zuber <admin@kernvalley.us>
	 */O((async function({signal:e}={}){const{promise:t,resolve:n,reject:r}=A();return e instanceof AbortSignal&&e.aborted?r(e.reason||new DOMException("Operation aborted.")):0===y()?(i(document,"DOMContentLoaded",n,{signal:e,once:!0,capture:!0}),e instanceof AbortSignal&&e.addEventListener("abort",(({target:e})=>r(e.reason||new DOMException("Operation aborted."))),{once:!0})):n(),t})),O((async function({signal:e}={}){await b("interactive",{signal:e})})),O((async function({signal:e}={}){await b("complete",{signal:e})})),O((async function({signal:e}={}){const{promise:t,resolve:n,reject:r}=A();return e instanceof AbortSignal&&e.aborted?r(e.reason||new DOMException("Operation aborted.")):y()<2?(i(globalThis,"load",n,{signal:e,once:!0,capture:!0}),e instanceof AbortSignal&&e.addEventListener("abort",(({target:e})=>r(e.reason||new DOMException("Operation aborted."))),{once:!0})):n(),t})),O((async function({signal:e}={}){const{promise:t,resolve:n}=A();return i(globalThis,"unload",n,{signal:e,once:!0,capture:!0}),t})),O((async function({signal:e}={}){const{promise:t,resolve:n}=A({signal:e});return i(globalThis,"beforeunload",n,{signal:e,once:!0,capture:!0}),t})),O((async function({signal:e}={}){const{promise:t,resolve:n,reject:r}=A();return e instanceof AbortSignal&&e.aborted?r(e.reason):"onbeforeinstallprompt"in globalThis&&(i(globalThis,"beforeinstallprompt",n,{once:!0,capture:!0,signal:e}),e instanceof AbortSignal&&i(e,"abort",(({reason:e})=>r(e)),{once:!0})),await t})),
/**
	 * @copyright 2023 Chris Zuber <admin@kernvalley.us>
	 */
"AbortController"in window&&AbortController.prototype.hasOwnProperty("signal"),new Promise((()=>{}));const L=new WeakMap;async function T(e,{scope:t,policy:n=("trustedTypes"in globalThis?trustedTypes.defaultPolicy:null),type:r="classic",updateViaCache:i="none"}={}){const{resolve:o,reject:s,promise:a}=A();return"serviceWorker"in navigator&&navigator.serviceWorker.register instanceof Function?"string"==typeof e||u(e)||e instanceof URL?!u(e)&&c(n)?navigator.serviceWorker.register(n.createScriptURL(e),{scope:t,type:r,updateViaCache:i}).then(o).catch(s):navigator.serviceWorker.register(e,{scope:t,type:r,updateViaCache:i}).then(o).catch(s):s(new TypeError("Invalid Service worker registration source")):s(new DOMException("Service worker not supported")),await a}function S(e){return"object"==typeof e&&!Object.is(e,null)&&!Array.isArray(e)}function N(e){switch(typeof e){case"undefined":return!0;case"object":return!!Object.is(e,null)||(Array.isArray(e)?0===e.length:e instanceof Date&&Number.isNaN(e.getTime()));case"number":return Number.isNaN(e);case"string":return 0===e.length;default:return!1}}function O(e,t){return e.once instanceof Function?e.once(t):function(...n){if(L.has(e))return L.get(e);if(v(e)){const r=e.apply(t||this,n).catch((t=>{throw L.delete(e),t}));return L.set(e,r),r}if(e instanceof Function){const r=e.apply(t||this,n);return L.set(e,r),r}}}function x(e,t){const n=new URL(e,document.baseURI);return t instanceof HTMLFormElement?x(n,new FormData(t)):t instanceof FormData||t instanceof URLSearchParams?x(n,Object.fromEntries(t)):Array.isArray(t)||"string"==typeof t?x(n,new URLSearchParams(t)):(S(t)&&Object.entries(t).forEach((([e,t])=>{"string"==typeof t||"number"==typeof t&&!Number.isNaN(t)?n.searchParams.set(e,t):"boolean"==typeof t?t?n.searchParams.set(e,""):n.searchParams.delete(e):N(t)||n.searchParams.set(e,t.toString())})),n)}function P(e,{source:t,medium:n="referral",content:r,campaign:i,term:o}={}){return N(e)?null:e instanceof URL?"string"!=typeof t?e:x(e,{utm_source:t,utm_medium:n,utm_content:r,utm_campaign:i,utm_term:o}):P(new URL(e,document.baseURI),{source:t,medium:n,content:r,campaign:i,term:o})}
/**
	 * @copyright 2023 Chris Zuber <admin@kernvalley.us>
	 */function M(e,t={}){if(!(e instanceof Element))throw new TypeError("el must be an Element");if(!S(t))throw new TypeError("props must be an object");Object.entries(t).forEach((([t,n])=>{switch(typeof n){case"string":case"number":e.dataset[t]=n.toString();break;case"boolean":n?e.dataset[t]="":delete e.dataset[t];break;case"undefined":delete e.dataset[t];break;case"object":Object.is(n,null)?delete e.dataset[t]:n instanceof Date?e.dataset[t]=n.toISOString():n instanceof URL?e.dataset[t]=n.href:e.dataset[t]=JSON.stringify(n);break;default:throw new TypeError("Unable to handle type: "+typeof n)}}))}function j(e,t={},{priority:n}={}){if(!(e instanceof Element))throw new TypeError("el must be an Element");if(!S(t))throw new TypeError("props must be an object");Object.entries(t).forEach((([t,r])=>{"string"==typeof r||"number"==typeof r?e.style.setProperty(t,r,n):r instanceof URL?e.type.setProperty(t,r.href,n):"object"==typeof r&&!Object.is(r,null)&&r.toString instanceof Function?e.style.setProperty(t,r.toString(),n):e.style.removeProperty(t)}))}function R(e,t={},{namespace:n=null,policy:r}={}){if(!(e instanceof Element))throw new TypeError("el must be an Element");if(!S(t))throw new TypeError("props must be an object");Object.entries(t).forEach((([t,i])=>{"string"==typeof i||"number"==typeof i?s(e,t,i,{policy:r,elementNs:n}):"trustedTypes"in globalThis&&p(i)?0===i.toString().length?e.removeAttribute(t):s(e,t,i,{policy:r,elementNs:n}):"boolean"==typeof i?"string"==typeof namespace?i?e.setAttributeNS(n,t,""):e.removeAttributeNS(n,t):e.toggleAttribute(t,i):i instanceof Date?s(e,t,i.toISOString(),{policy:r,elementNs:n}):i instanceof URL?s(e,t,i.href,{policy:r,elementNs:n}):null==i?"string"==typeof namespace?e.removeAttributeNS(n,t):e.removeAttribute(t):s(e,t,JSON.stringify(i),{policy:r,elementNs:n})}))}function U(e,t,{fallback:r=NaN,min:i=Number.MIN_SAFE_INTEGER,max:o=Number.MAX_SAFE_INTEGER}={}){if(e.hasAttribute(t)){const s=n(i,parseInt(e.getAttribute(t)),o);return Number.isNaN(s)?r:s}return r}function C(e,t,r,{min:i=Number.MIN_SAFE_INTEGER,max:o=Number.MAX_SAFE_INTEGER,policy:a}={}){r instanceof Date?s(e,t,r.getTime(),{min:i,max:o,policy:a}):Number.isInteger(r)?s(e,t,n(i,r,o),{policy:a}):"string"==typeof r?C(e,t,parseInt(r),{min:i,max:o}):e.removeAttribute(t)}function I(e,t,{fallback:n=null}={}){return e.hasAttribute(t)&&e.getAttribute(t)||n}function F(e,n,r,{minLength:i=1,maxLength:o=1/0,pattern:a=null,fallback:c,policy:l}={}){if("string"!=typeof r||!t(i,r.length,o)||a instanceof RegExp&&!a.test(r))if(p(r)){const c=r.toString();!t(i,c.length,o)||a instanceof RegExp&&!a.test(c)?e.removeAttribute(n):s(e,n,r,{policy:l})}else"string"==typeof c||p(c)?F(e,n,c,{pattern:a,policy:l,minLength:i,maxLength:o}):e.removeAttribute(n);else s(e,n,r,{policy:l})}function z(e,t,n,{base:r=document.baseURI,requirePath:i=!1,policy:o}={}){if(n instanceof URL&&(!i||n.pathname.length>1))s(e,t,n.href,{policy:o});else if("string"==typeof n&&0!==n.length)z(e,t,new URL(n,r),{requirePath:i});else if(u(n)){const r=new URL(n.toString(),document.baseURI);!i||r.pathname.length>1?s(e,t,n,{policy:o}):e.removeAttribute(t)}else e.removeAttribute(t)}
/**
	 * @copyright 2023 Chris Zuber <admin@kernvalley.us>
	 */O((async({policy:e=("trustedTypes"in globalThis?trustedTypes.defaultPolicy:null)}={})=>{if("serviceWorker"in navigator&&"serviceWorker"in document.documentElement.dataset){const{serviceWorker:t,scope:n="/",updateViaCache:r}=document.documentElement.dataset;try{c(e)?await T(e.createScriptURL(t),{scope:n,updateViaCache:r}):await T(t,{scope:n,updateViaCache:r}),await async function(){if("serviceWorker"in navigator&&"reloadOnUpdate"in document.documentElement.dataset){(await navigator.serviceWorker.ready).addEventListener("updatefound",(async({target:e})=>{e.update();new(await customElements.whenDefined("html-notification"))("Update available",{body:"App updated in background. Would you like to reload to see updates?",requireInteraction:!0,actions:[{title:"Reload",action:"reload"},{title:"Dismiss",action:"dismiss"}]}).addEventListener("notificationclick",(({target:e,action:t})=>{switch(t){case"dismiss":e.close();break;case"reload":e.close(),location.reload()}}))}))}}()}catch(e){console.error(e)}}}));
/**
	 * @copyright 2023 Chris Zuber <admin@kernvalley.us>
	 */
function D(e,{"@context":t="https://schema.org","@type":n,"@identifier":r,itemtype:s,itemprop:a,itemscope:c,itemref:u,itemid:p,id:d,classList:g,hidden:m,dataset:f,accessKey:h,title:y,part:b,slot:w,is:v,children:A,styles:E,text:k,html:L,policy:T=("trustedTypes"in globalThis?globalThis.trustedTypes.defaultPolicy:null),sanitizer:O,aria:x,events:{capture:P,passive:U,once:C,signal:I,...F}={},animation:{keyframes:z,duration:D=0,delay:H=0,endDelay:W=0,easing:q="linear",direction:_="normal",fill:$="none",iterations:V=1,iterationStart:B=0,composite:J="replace",iterationComposite:K="replace",pseudoElement:G}={},...X}={}){if("string"!=typeof e)throw new TypeError("tag must be a string");{const Q=document.createElement(e,{is:v});return Q.hidden=m,"string"==typeof y&&(Q.title=y),"string"==typeof d?Q.id=d:"string"==typeof r&&(Q.id=r),Array.isArray(g)&&0!==g.length&&Q.classList.add(...g),S(f)&&M(Q,f),Array.isArray(b)&&0!==b.length?Q.part.add(...b):"string"==typeof b&&Q.part.add(b),"string"==typeof w&&(Q.slot=w),S(E)&&j(Q,E),Object.entries(F).forEach((([e,t])=>{i(Q,e,t,{capture:P,passive:U,once:C,signal:I})})),"string"==typeof k?Q.textContent=k:("string"==typeof L||l(L))&&("Sanitizer"in globalThis&&O instanceof globalThis.Sanitizer&&Element.prototype.setHTML instanceof Function?Q.setHTML(L,{sanitizer:O}):o(Q,"innerHTML",L,{policy:T})),Y=A,(Array.isArray(Y)||S(Y)&&Y[Symbol.iterator]instanceof Function)&&Q.append(...A.filter((e=>"string"==typeof e||e instanceof Element))),"string"==typeof v&&(X.is=v),"string"==typeof s?X.itemtype=s:"string"==typeof n&&(X.itemtype=new URL(n,t).href),"string"==typeof a?X.itemprop=a:Array.isArray(a)&&(X.itemprop=a.join(" ")),"string"==typeof u?X.itemref=u:Array.isArray(u)&&(X.itemref=u.join(" ")),"boolean"==typeof c||"string"==typeof c?X.itemscope=c:X.hasOwnProperty("itemtype")&&(X.itemscope=!0),"string"==typeof p&&(X.itemid=p),Array.isArray(h)?Q.accessKey=h.join(" "):"string"==typeof accesskey&&(Q.accessKey=h),R(Q,X),S(x)&&function(e,t={}){if(!(e instanceof Element))throw new TypeError("`el` must be an Element");Object.entries(t).forEach((([t,n])=>{"role"!==t&&(t=`aria-${t.toLowerCase()}`),N(n)?e.removeAttribute(t):e.setAttribute(t,n)}))}(Q,x),(Array.isArray(z)||S(z))&&Q.animate instanceof Function&&Q.animate(z,{duration:D,delay:H,endDelay:W,easing:q,direction:_,fill:$,iterations:V,iterationStart:B,composite:J,iterationComposite:K,pseudoElement:G}),Q}var Y}function H(e,{id:t,classList:n,hidden:r,dataset:i,children:o,styles:s,text:a,html:c,policy:l,sanitizer:u,events:{capture:p,passive:d,once:g,signal:m,...f}={},...h}={}){const y=D("slot",{id:t,classList:n,hidden:r,dataset:i,children:o,styles:s,text:a,html:c,policy:l,sanitizer:u,events:{capture:p,passive:d,once:g,signal:m,...f},...h});return y.name=e,y}function W(e,{alt:t="",id:n=null,height:r,width:i,crossOrigin:o=null,"@type":s,"@context":a,itemprop:c=null,itemtype:l=null,itemscope:u,sizes:p=null,srcset:d=null,referrerPolicy:g="strict-origin-when-cross-origin",fetchPriority:m="auto",loading:f="eager",decoding:h="async",role:y=null,slot:b=null,part:w=[],classList:v=[],dataset:A=null,styles:E=null,animation:k,events:{capture:L,passive:T,once:N,signal:O,...x}={},...P}={}){e instanceof URL||(e=new URL(e,document.baseURI));const M=D("img",{id:n,classList:v,dataset:A,slot:b,part:w,styles:E,itemtype:l,itemprop:c,itemscope:u,"@type":s,"@context":a,events:{capture:L,passive:T,once:N,signal:O,...x},animation:k,...P});return Number.isSafeInteger(i)&&(M.width=i),Number.isSafeInteger(r)&&(M.height=r),M.alt=t,M.referrerPolicy=g,M.loading=f,M.decoding=h,M.fetchPriority=m,"string"==typeof y&&(M.role=y),"string"==typeof o&&location.origin!==e.origin&&(M.crossOrigin=o),S(d)?M.srcset=Object.entries(d).map((([e,t])=>`${t} ${e}`)).join(", "):Array.isArray(d)&&0!==d.length?M.srcset=d.join(", "):"string"==typeof d&&(M.srcset=d),Array.isArray(p)&&0!==p.length?M.sizes=p.join(", "):"string"==typeof p&&(M.sizes=p),"string"==typeof e&&0!==e.length?M.src=e:e instanceof URL&&(M.src=e.href),M}function q(e,{type:t="text",required:n=!1,disabled:r=!1,readOnly:i=!1,multiple:o=!1,checked:s=!1,accept:a,id:c,classList:l,list:u,value:p,placeholder:d,pattern:g,inputMode:m,min:f=NaN,max:h=NaN,step:y=NaN,minLength:b=NaN,maxLength:w=NaN,autocomplete:v,styles:A,dataset:E,part:k,slot:L,animation:T,events:{capture:S,passive:O,once:x,signal:P,...M}={},...j}={}){if("string"!=typeof e)throw new TypeError("name must be a string");{const R=D("input",{id:c,classList:l,dataset:E,styles:A,part:k,slot:L,animation:T,events:{capture:S,passive:O,once:x,signal:P,...M},...j});return R.name=e,R.type=t,R.required=n,R.disabled=r,R.readOnly=i,R.multiple=o,R.checked=s,"string"==typeof v&&(R.autocomplete=v),"string"==typeof m&&(R.inputMode=m),"string"==typeof u&&R.setAttribute("list",u),"string"==typeof d&&(R.placeholder=d),"string"==typeof g&&(R.pattern=g),N(f)||(R.min=f),N(h)||(R.max=h),Number.isSafeInteger(b)&&b>=0&&(R.minLength=b),Number.isSafeInteger(w)&&w>0&&(R.maxLength=w),N(y)||(R.step=y),N(p)||(R.value=p),"string"==typeof a?R.accept=a:Array.isArray(a)&&(R.accept=a.join(",")),R}}
/**
	 * @copyright 2023 Chris Zuber <admin@kernvalley.us>
	 */const _={resp:Symbol("resp")};class $ extends Error{constructor(e=Response.error(),{message:t,cause:n}={}){super("string"==typeof t?t:`<${e.url}> [${e.status} ${e.statusText}]`,{cause:n}),Object.defineProperty(this,_.resp,{value:e,configurable:!1,writable:!1,enumerable:!1})}async json(){return await this[_.resp].json()}async text(){return await this[_.resp].text()}get body(){return this[_.resp].body}get bodyUsed(){return this[_.resp].bodyUsed}get headers(){return this[_.resp].headers}get ok(){return this[_.resp].ok}get redirected(){return this[_.resp].redirected}get status(){return this[_.resp].status}get statusText(){return this[_.resp].statusText}get type(){return this[_.resp].type}get url(){return this[_.resp].url}toJSON(){const{status:e,statusText:t,ok:n,url:r,message:i,type:o,redirected:s}=this;return{status:e,ok:n,statusText:t,url:r,message:i,type:o,redirected:s}}}
/**
	 * @copyright 2021-2023 Chris Zuber <admin@kernvalley.us>
	 */function V(e,{cause:t,message:n}={}){if(e instanceof Response){if(e.ok)return e;throw new $(e,{cause:t,message:n})}throw new TypeError("Expected a Response object")}function B(e){throw e instanceof $?e:e instanceof Error?new $(Response.error(),{cause:e,message:e.message}):new $(Response.error(),"string"==typeof e?{cause:new DOMException("Unknown network error"),message:e}:{cause:new DOMException("Unknown network error"),message:"Unknown network error"})}async function J(e,t={}){if(t.signal instanceof AbortSignal&&t.signal.aborted)throw new $(Response.error(),{cause:t.signal.reason,message:t.signal.reason instanceof Error?t.signal.reason.message:t.signal.reason});return t.signal instanceof AbortSignal&&!("signal"in Request.prototype)?await Promise.race([globalThis.fetch(e,t),w(t.signal)]).then((e=>V(e,{message:t.errorMessage})),B):await globalThis.fetch(e,t).then((e=>V(e,{message:t.errorMessage})),B)}const K=O((async function(){const{ok:e,headers:t}=await J(location.href,{method:"HEAD"});if(e&&t.has("Content-Security-Policy")){const e=t.get("Content-Security-Policy").trim().split(";").filter((e=>0!==e.length));return Object.fromEntries(e.map((e=>{const[t,...n]=e.trim().split(" ").filter((e=>0!==e.length));return[t,n]})))}}));function G(){const e=document.head.querySelector('meta[http-equiv="Content-Security-Policy"][content]');if(e instanceof HTMLMetaElement){const t=e.content.trim().split(";").filter((e=>0!==e.length));return Object.fromEntries(t.map((e=>{const[t,...n]=e.trim().split(" ").filter((e=>0!==e.length));return[t,n]})))}return{}}async function X(e,{timeout:t,signal:n}={}){if("string"==typeof e)return await X(document.querySelector(e,{timeout:t,signal:n}));if(e instanceof HTMLLinkElement){if(0===e.href.length)throw new DOMException("Missing `href` on <link>");{const{href:r,integrity:i,type:o,referrerPolicy:s,crossOrigin:a}=e;let c;const l="string"==typeof a?"cors":"no-cors",u=new Headers;return"cors"===l&&(c="use-credentials"===a?"include":"omit"),"string"==typeof o&&u.set("Accept",o),await async function(e,{body:t,mode:n="cors",cache:r="default",credentials:i="omit",redirect:o="follow",priority:s="auto",referrerPolicy:a="no-referrer",headers:c=new Headers,integrity:l,keepalive:u,signal:p,timeout:d=null,errorMessage:g}={}){return void 0!==t?e=x(e,t):"string"==typeof e&&(e=new URL(e,document.baseURI)),void 0===p&&Number.isInteger(d)?p=AbortSignal.timeout(d):p instanceof AbortController&&(p=p.signal),await J(e,{method:"GET",mode:n,credentials:i,referrerPolicy:a,headers:c,cache:r,redirect:o,priority:s,integrity:l,keepalive:u,signal:p,errorMessage:g})}(r,{mode:l,credentials:c,headers:u,integrity:i,referrerPolicy:s,timeout:t,signal:n})}}throw new DOMException("Expected a <link>")}
/**
	 * @copyright 2023 Chris Zuber <admin@kernvalley.us>
	 */async function Y(e,{rel:t="stylesheet",media:n="all",blocking:r=null,crossOrigin:i="anonymous",referrerPolicy:o="no-referrer",integrity:s=null,disabled:a=!1,fetchPriority:c="auto",title:l=null,nonce:u=null,parent:p=document.head,signal:d}={}){const{resolve:g,reject:m,promise:f}=A();if(d instanceof AbortSignal&&d.aborted)m(d.reason);else{const f=new AbortController,h=await function(e=null,{rel:t=[],type:n=null,as:r=null,blocking:i=null,crossOrigin:o="anonymous",referrerPolicy:s="no-referrer",fetchPriority:a="auto",integrity:c=null,nonce:l=null,media:u="all",disabled:p=!1,dataset:d=null,title:g=null,sizes:m=[],events:{capture:f,passive:h,once:y,signal:b,...w}={},...v}){const A=D("link",{dataset:d,...v,events:{capture:f,passive:h,once:y,signal:b,...w}});return Array.isArray(t)?A.relList.add(...t):"string"==typeof t&&A.relList.add(t),"string"==typeof n&&(A.type=n),"string"==typeof r&&(A.as=r),"string"==typeof o&&(A.crossOrigin=o),"string"==typeof s&&(A.referrerPolicy=s),"string"==typeof a&&(A.fetchPriority=a),"string"==typeof c&&(A.integrity=c),"string"==typeof l&&(A.nonce=l),"string"==typeof u&&(A.media=u),Array.isArray(i)?A.setAttribute("blocking",i.join(" ")):"string"==typeof i&&A.setAttribute("blocking",i),"string"==typeof e&&(A.href=e),p&&(A.disabled=!0),"string"==typeof g&&(A.title=g),Array.isArray(m)&&0!==m.length?A.sizes.add(...m):"string"==typeof m&&A.sizes.add(m),A}(e,{rel:t,media:n,crossOrigin:i,referrerPolicy:o,integrity:s,disabled:a,fetchPriority:c,title:l,nonce:u,blocking:r,events:{load:({target:e})=>{g(e),f.abort()},error:({target:e})=>{const t=new DOMException(`Error loading <link href="${e.href}">`);m(t),f.abort(t)},signal:d instanceof AbortSignal?AbortSignal.any([d,f.signal]):f.signal}});d instanceof AbortSignal&&d.addEventListener("abort",(({target:e})=>{m(e.reason),f.abort(e.reason),h.parentELement instanceof Element&&(h.disabled=!0,h.remove())}),{once:!0,signal:f.signal}),p.append(h)}return await f}
/**
	 * @copyright 2023 Chris Zuber <admin@kernvalley.us>
	 */O((async function(){try{const e=await K();return"object"!=typeof e||Object.is(e,null)?G():e}catch(e){return console.error(e),G()}})),O((async function({timeout:e,signal:t}={}){const n=await X('link[rel="manifest"][href]',{timeout:e,signal:t});return await n.json()}));const Q=new WeakMap,Z=new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(e.isIntersecting){const{resolve:n}=Q.get(e.target);Q.delete(e.target),n(e),t.unobserve(e.target)}}))}),{rootMargin:`${Math.min(250,Math.floor(.3*screen.height))}px`});async function ee(e,{signal:t,base:n=document}={}){const{resolve:r,reject:i,promise:o}=A();return t instanceof AbortSignal&&t.aborted?i(t.reason):"string"==typeof e?ee(n.querySelector(e),{signal:t}).then(r).catch(i):e instanceof Element?Q.has(e)?(Q.get(e).promise.then(r).catch(i),t instanceof AbortSignal&&t.addEventListener("abort",(({target:{reason:e}})=>{i(e)}),{once:!0})):(Q.set(e,{resolve:r,reject:i,promise:o}),Z.observe(e),t instanceof AbortSignal&&t.addEventListener("abort",(({target:{reason:t}})=>{Z.unobserve(e),Q.has(e)&&(Q.get(e).reject(t),Q.delete(e))}),{once:!0})):i(new TypeError("Non-elements can never intersect")),o}const te="https://unpkg.com/@shgysk8zer0/components@0.0.1/",ne=!(document.currentScript instanceof HTMLScriptElement)?{url:document.currentScript&&document.currentScript.src||new URL("ad.min.js",document.baseURI).href,resolve:e=>(void 0)(e)}:{url:te,resolve:e=>new URL(e,te).href};
/**
	 * @copyright 2023 Chris Zuber <admin@kernvalley.us>
	 */
const re="http://www.w3.org/2000/svg";
/**
	 * @copyright 2022-2023 Chris Zuber <admin@kernvalley.us>
	 */function ie(e,{fill:t,stroke:n,width:r,height:i,pathLength:o,children:s=[],id:a,classList:c=[],styles:l,dataset:u,events:{capture:p,passive:d,once:g,signal:m,...f}={},animation:{keyframes:h,duration:y=0,delay:b=0,endDelay:w=0,easing:v="linear",direction:A="normal",fill:E="none",iterations:k=1,iterationStart:L=0,composite:T="replace",iterationComposite:N="replace",pseudoElement:O}={},...x}={}){const P=document.createElementNS(re,e);if("string"==typeof a&&(P.id=a),Array.isArray(c)&&0!==c.length&&P.classList.add(...c),"string"==typeof t&&P.setAttribute("fill",t),"string"==typeof n&&P.setAttribute("stroke",n),"number"!=typeof i||Number.isNaN(i)||P.setAttribute("height",i.toString()),"number"!=typeof r||Number.isNaN(r)||P.setAttribute("width",r.toString()),"number"!=typeof o||Number.isNaN(o)||P.setAttribute("pathLength",o.toString()),"string"==typeof x.title){const e=ie("title");e.textContent=x.title,P.prepend(e)}return(Array.isArray(h)||S(h)&&P.animate instanceof Function)&&P.animate(h,{duration:y,delay:b,endDelay:w,easing:v,direction:A,fill:E,iterations:k,iterationStart:L,composite:T,iterationComposite:N,pseudoElement:O}),Array.isArray(s)&&0!==s.length&&P.append(...s.filter((e=>"string"==typeof e||e instanceof Element))),S(l)&&j(P,l),S(f)&&Object.entries(f).forEach((([e,t])=>P.addEventListener(e,t,{capture:p,passive:d,once:g,signal:m}))),S(u)&&M(P,u),R(P,x),P}function oe({id:e=null,fill:t=null,viewBox:n=null,height:r=null,width:i=null,label:o=null,slot:s=null,role:a="img",hidden:c=!1,classList:l=[],children:u=[],animation:p,part:d=[],...g}={}){const m=ie("svg",{width:i,height:r,fill:t,animation:p,children:u,id:e,classList:l,...g});return m.setAttribute("role",a),m.setAttribute("xmlns",re),"string"==typeof n?m.setAttributeNS(null,"viewBox",n):Array.isArray(n)&&m.setAttributeNS(null,"viewBox",n.map((e=>e.toString())).join(" ")),"string"==typeof o&&m.setAttribute("aria-label",o),!0===c&&m.setAttribute("aria-hidden","true"),"string"==typeof s&&(m.slot=s),Array.isArray(l)&&0!==l.length&&m.classList.add(...l),Array.isArray(d)&&0!==d.length&&("part"in m?m.part.add(...d):m.setAttribute("part",d.join(" "))),m}function se(e,{id:t,fill:n,stroke:r,pathLength:i,animation:o,...s}={}){const a=ie("path",{id:t,fill:n,stroke:r,pathLength:i,animation:o,...s});if(Array.isArray(e)&&0!==e.length)a.setAttribute("d",e.join(" "));else{if("string"!=typeof e)throw new TypeError("Invalid `d` attribute in <path>.");a.setAttribute("d",e)}return a}
/**
	 * @copyright 2023 Chris Zuber <admin@kernvalley.us>
	 */const ae="presentation";const ce=new WeakMap,le=function({base:e=document.baseURI,path:t="./"}={}){const n=new URL(t,e);return e=>new URL(e,n).href}({base:ne.url,path:"./krv/"}),ue=new URL("/WPAdBlock","https://schema.org").href,pe=function({size:e=16,fill:t="currentColor",classList:n=[],part:r=[],slot:i,animation:o,...s}={}){return oe({viewBox:[0,0,16,16],...s,height:e,width:e,fill:t,classList:n,part:r,slot:i,animation:o,role:ae,children:[se("M13.032 1c.534 0 .969.427.969.969v.062c-.017 6.613-5.383 11.97-12 11.97H1.97c-.545 0-.97-.447-.97-1v-3c0-.555.447-1 1-1h2c.555 0 1 .445 1 1v.468A8.967 8.967 0 0 0 10.47 5H10c-.553 0-1-.446-1-1V2c0-.554.447-1 1-1h3.032z",{overflow:"visible"})]})}({size:18}),de=function({size:e=16,fill:t="currentColor",classList:n=[],part:r=[],slot:i,animation:o,...s}={}){return oe({viewBox:[0,0,14,16],...s,height:e,width:parseInt(e/16*14),fill:t,classList:n,part:r,slot:i,animation:o,role:ae,children:[se("M0 4v8c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1H1c-.55 0-1 .45-1 1zm13 0L7 9 1 4h12zM1 5.5l4 3-4 3v-6zM2 12l3.5-3L7 10.5 8.5 9l3.5 3H2zm11-.5l-4-3 4-3v6z",{"fill-rule":"evenodd"})]})}({size:18}),ge=function({size:e=16,fill:t="currentColor",classList:n=[],part:r=[],slot:i,animation:o,...s}={}){return oe({viewBox:[0,0,12,16],...s,height:e,width:parseInt(e/16*12),fill:t,classList:n,part:r,slot:i,animation:o,role:ae,children:[se("M11 10h1v3c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1h3v1H1v10h10v-3zM6 2l2.25 2.25L5 7.5 6.5 9l3.25-3.25L12 8V2H6z",{"fill-rule":"evenodd"})]})}({size:18}),me=function({size:e=16,fill:t="currentColor",classList:n=[],part:r=[],slot:i,animation:o,...s}={}){return oe({viewBox:[0,0,14,16],...s,height:e,width:parseInt(e/16*14),fill:t,classList:n,part:r,slot:i,animation:o,role:ae,children:[se("M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z",{"fill-rule":"evenodd"})]})}({size:18}),fe=function({size:e=16,fill:t="currentColor",classList:n=[],part:r=[],slot:i,animation:o,...s}={}){return oe({viewBox:[0,0,16,16],...s,height:e,width:e,fill:t,classList:n,part:r,slot:i,animation:o,role:ae,children:[se("M8 0a5 5 0 0 0-5 5c0 .173.014.332.031.5.014.167.036.336.063.5C3.666 9.514 6 12.003 8 14.003c2-2 4.334-4.489 4.906-8.003a6.38 6.38 0 0 0 .063-.5c.017-.168.03-.327.03-.5a5 5 0 0 0-5-5zm0 3a2 2 0 1 1 0 4 2 2 0 0 1 0-4z")]})}({size:18});function he(e,t){const n=function(e,t){const{shadow:n}=ce.get(e);return n.querySelector(`slot[name="${t}"]`)}(e,t);return n instanceof HTMLElement?n.assignedElements():[]}function ye(e,t){he(e,t).forEach((e=>e.remove()))}function be(e){return({currentTarget:t})=>{t.assignedElements().forEach((t=>t.setAttribute("itemprop",e)))}}function we(e,t){if(!S(t))throw new TypeError("data must be an object");ce.set(e,{...ce.get(e),...t})}async function ve(e,{id:t,label:n,source:r,campaign:i,medium:o,term:s,content:a,layout:c,theme:l}){const u=new URL("/api/events","https://ads.kernvalley.us"),p=Object.fromEntries(Object.entries({type:e,origin:location.origin,pathname:location.pathname,layout:c,theme:l,datetime:(new Date).toISOString(),uuid:t,label:n,source:r,campaign:i,medium:o,term:s,content:a}).filter((([,e])=>void 0!==e&&!Object.is(e,null))));return["localhost"].includes(location.hostname)||location.hostname.endsWith(".netlify.live")||location.hostname.endsWith(".netlify.app")||/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/.test(location.hostname)?(console.info({type:e,endpoint:u,params:p}),!1):navigator.sendBeacon(u,new URLSearchParams(p))}class Ae extends HTMLElement{constructor({background:e=null,border:t=null,borderWidth:n=null,callToAction:r=null,campaign:i=null,color:o=null,content:s=null,description:a=null,height:c=null,identifier:l=null,image:u=null,imageFit:p=null,imagePosition:d=null,linkColor:g=null,label:m=null,layout:f=null,media:h=null,medium:y=null,source:b=null,term:w=null,theme:v=null,url:A=null,width:E=null,loading:k=null}={}){super();const L=this.attachShadow({mode:"closed"}),T=this.attachInternals();T.states.add("--loading"),T.ariaBusy="true",T.role="document";const S=D("div",{"@type":"Organization",itemprop:"publisher",itemscope:!0,hidden:!0,children:[D("meta",{itemprop:"name",content:"Kern Valley Ads"}),D("meta",{itemprop:"url",content:"https://ads.kernvalley.us"}),D("meta",{itemprop:"logo",content:"https://cdn.kernvalley.us/img/branding/ads.kernvalley.us.svg"})]}),N=D("a",{id:"container",part:["container"],rel:"noopener noreferrer external",itemprop:"url",target:"_blank",events:{click:e=>{!e.isTrusted||this.preview||0===this.id.length||0===e.currentTarget.href.length||e.target.matches("#branding, #branding > *")||ve("click",this)},once:!0},children:[D("h3",{id:"label",part:["label","text"],children:[H("label",{events:{slotchange:be("name")},text:"No Label"})]}),D("div",{id:"image",part:["image"],children:[H("image",{events:{slotchange:be("image")},children:[W("https://cdn.kernvalley.us/img/raster/missing-image.png",{referrerPolicy:"no-referrer",crossOrigin:"anonymous",loading:"lazy"})]})]}),D("div",{id:"description",part:["text","description"],children:[H("description",{text:"No Description",events:{slotchange:be("description")}})]}),D("div",{id:"call-to-action",part:["call-to-action"],children:[H("calltoaction",{text:"No Call-to-Action"}),D("span",{part:["icon","call-icon"],children:[H("call-icon",{children:[pe.cloneNode(!0)]})]}),D("span",{part:["icon","email-icon"],children:[H("email-icon",{children:[de.cloneNode(!0)]})]}),D("span",{part:["icon","link-icon"],children:[H("link-icon",{children:[ge.cloneNode(!0)]})]}),D("span",{part:["icon","geo-icon"],children:[H("geo-icon",{children:[fe.cloneNode(!0)]})]})]}),D("a",{id:"branding",part:["branding"],href:P("https://ads.kernvalley.us",{source:location.hostname,medium:"referral",campaign:"ad-info"}),target:"_blank",children:[D("span",{part:["icon","branding-icon"],children:[me.cloneNode(!0)]}),D("span",{text:"Ads by KernValley.US"})]})]});ce.set(this,{shadow:L,timeout:NaN,container:N,internals:T}),"string"==typeof r?this.callToAction=r:r instanceof HTMLElement&&(r.slot="calltoaction",this.append(r)),"string"==typeof m?this.label=m:m instanceof HTMLElement&&(m.slot="label",this.append(m)),"string"==typeof a?this.description=a:a instanceof HTMLElement&&(a.slot="description",this.append(a)),"string"==typeof u||u instanceof URL?this.image=u:u instanceof HTMLElement&&(u.slot="image",this.append(u)),L.append(N);const O=this.querySelector('[itemprop="publisher"]');O instanceof HTMLElement?O.replaceWith(S):this.append(S),T.ariaBusy="false",this.addEventListener("connected",(()=>{this.setAttribute("itemtype",ue),this.setAttribute("itemscope",""),"string"==typeof k&&(this.loading=k),"string"==typeof l&&(this.id=l),"string"==typeof e&&(this.background=e),"string"==typeof t&&(this.border=t),"string"!=typeof n&&"number"!=typeof n||(this.borderWidth=n),"string"==typeof o&&(this.color=o),"string"==typeof g&&(this.linkColor=g),"string"==typeof h&&(this.media=h),"string"==typeof f&&(this.layout=f),("string"==typeof A||A instanceof URL)&&(this.url=A),"string"==typeof v&&(this.theme=v),"string"==typeof p&&(this.imageFit=p),"string"==typeof d&&(this.imagePosition=d),"string"==typeof b&&(this.source=b),"string"==typeof y&&(this.medium=y),"string"==typeof i&&(this.campaign=i),"string"==typeof w&&(this.term=w),"string"==typeof s&&(this.content=s),"number"!=typeof c||Number.isNaN(c)||(this.height=c),"number"!=typeof E||Number.isNaN(c)||(this.width=E)}))}async connectedCallback(){this.dispatchEvent(new Event("connected"));const{shadow:e,internals:t}=ce.get(this);await ee(this),t.states.add("--seen"),await Y(le("./ad.css"),{parent:e}),setTimeout((()=>this.hidden=!1),1),t.states.delete("--loading"),0!==this.id.length&&ve("view",this)}attributeChangedCallback(e,t,n){const{shadow:r,timeout:i,container:o}=ce.get(this);switch(e){case"url":case"source":case"medium":case"term":case"campaign":case"content":Number.isNaN(i)||clearTimeout(i),we(this,{timeout:setTimeout((()=>{const e=this.getUrl();we(this,{timeout:NaN}),z(r.querySelector('[part~="container"]'),"href",e)}),10)});break;case"background":"string"==typeof n?o.style.setProperty("--ad-background",n):o.style.removeProperty("--ad-background");break;case"color":"string"==typeof n?o.style.setProperty("--ad-color",n):o.style.removeProperty("--ad-color");break;case"border":"string"==typeof n?o.style.setProperty("--ad-border",n):o.style.removeProperty("--ad-boder");break;case"borderwidth":"string"==typeof n?o.style.setProperty("--ad-border-width",n):o.style.removeProperty("--ad-border-width");break;case"linkcolor":"string"==typeof n?o.style.setProperty("--ad-link-color",n):o.style.removeProperty("--ad-link-color");break;case"media":break;default:throw new Error(`Unsupported property changed: "${e}"`)}}toJSON(){const{id:e,label:t,description:n,callToAction:r,image:i,layout:o,theme:s,campaign:a,content:c,source:l,medium:u,term:p,border:d,borderWidth:g,background:m,color:f,imageFit:h,imagePosition:y,linkColor:b}=this;return{"@context":"https://schema.org","@type":"WPAdBlock",version:Ae.VERSION,identifier:e,label:t,description:n,callToAction:r,image:i,layout:o,theme:s,campaign:a,content:c,source:l,medium:u,term:p,border:d,borderWidth:g,background:m,color:f,imageFit:h,imagePosition:y,linkColor:b}}get layout(){return I(this,"layout",{fallback:"card"})}set layout(e){F(this,"layout",e)}get theme(){return I(this,"theme",{fallback:"auto"})}set theme(e){F(this,"theme",e)}get preview(){return function(e,t){return e.hasAttribute(t)}(this,"preview")}set preview(e){!function(e,t,n){e.toggleAttribute(t,n)}(this,"preview",e)}get background(){return I(this,"background")}set background(e){F(this,"background",e)}get color(){return I(this,"color")}set color(e){F(this,"color",e)}get height(){return U(this,"height")}set height(e){C(this,"height",e)}get width(){return U(this,"width")}set width(e){C(this,"width",e)}get border(){return I(this,"border")}set border(e){F(this,"border",e)}get borderWidth(){return U(this,"borderwidth")}set borderWidth(e){C(this,"borderwidth",e)}get imageFit(){return I(this,"imagefit")}set imageFit(e){F(this,"imagefit",e)}get imagePostion(){return I(this,"imageposition")}set imagePosition(e){F(this,"imageposition",e)}get label(){const e=he(this,"label");return 1===e.length?e[0].textContent:null}set label(e){ye(this,"label"),"string"==typeof e&&0!==e.length&&this.append(D("span",{text:e,slot:"label"}))}get image(){const e=he(this,"image");return 1===e.length?e[0].src:null}set image(e){ye(this,"image"),"string"==typeof e&&0!==e.length&&this.append(W(e,{loading:"lazy",alt:"",crossOrigin:"anonymous",referrerPolicy:"no-referrer",slot:"image"}))}get description(){const e=he(this,"description");return 1===e.length?e[0].textContent:null}set description(e){ye(this,"description"),"string"==typeof e&&0!==e.length&&this.append(D("span",{text:e,slot:"description"}))}get callToAction(){const e=he(this,"calltoaction");return 1===e.length?e[0].textContent:null}set callToAction(e){ye(this,"calltoaction"),"string"==typeof e&&0!==e.length&&this.append(D("span",{text:e,slot:"calltoaction"}))}get url(){return function(e,t,{base:n=document.baseURI}={}){return e.hasAttribute(t)?new URL(e.getAttribute(t),n):null}(this,"url")}set url(e){z(this,"url",e,{requirePath:!1})}get campaign(){return I(this,"campaign")}set campaign(e){F(this,"campaign",e)}get content(){return I(this,"content")}set content(e){F(this,"content",e)}get medium(){return I(this,"medium",{fallback:"referral"})}set medium(e){F(this,"medium",e)}get source(){return I(this,"source")}set source(e){F(this,"source",e)}get term(){return I(this,"term")}set term(e){F(this,"term",e)}getUrl(){if(this.hasAttribute("url")){const{url:e,source:t,medium:n,term:r,content:i,campaign:o}=this,s=new P(e,{source:t,medium:n,term:r,content:i,campaign:o});switch(e.protocol){case"http:":case"https:":return s.href;case"mailto:":case"tel:":case"geo:":return`${s.protocol}${s.pathname}`;default:throw new DOMException(`Unsupported protocol "${s.protocol}"`)}}}async toFile({name:e="ad.krvad",signal:t,priority:n}={}){return scheduler.postTask((()=>{const t=JSON.stringify(this,null,4);return new File([t],e,{type:Ae.CONTENT_TYPE})}),{signal:t,priority:n})}async downloadFile({name:e="ad.krvad",signal:t,priority:n}={}){const r=await this.toFile({name:e,signal:t,priority:n});await
/**
	 * @copyright 2023 Chris Zuber <admin@kernvalley.us>
	 */
async function(e,{signal:t}={}){if(t instanceof EventTarget&&t.aborted)throw t.reason;if(!(e instanceof File))throw new TypeError("Not a file");{const n=document.createElement("a"),r=URL.createObjectURL(e);n.href=r,n.download=e.name,n.hidden=!0,n.addEventListener("click",(({target:e})=>{requestIdleCallback((()=>{URL.revokeObjectURL(e.href),e.remove()}))}),{passive:!0,capture:!0,once:!0,signal:t}),n.click()}}(r)}static get observedAttributes(){return["background","border","borderwidth","color","linkcolor","media","url","source","term","content","campaign","medium"]}static fromJSONObject(e){return new Ae(e)}static async fromFile(e){if(e instanceof File){if(e.name.endsWith(".krvad")){const t=JSON.parse(await e.text());return Ae.fromJSONObject(t)}throw new Error(`${e.name} is not a KRV Ad file`)}throw new Error("Expected instance of `File`")}static async openFile(){const[e]=await async function({accept:e=null,multiple:t=!1,directory:n=!1,description:r="Select file(s)",signal:i}={}){if(i instanceof AbortSignal&&i.aborted)throw i.reason||new DOMException("Operation aborted.");return await k("file-picker",(async()=>{const{resolve:o,reject:s,promise:a}=A({signal:i});if(!(i instanceof AbortSignal&&i.aborted)){const a=crypto.randomUUID(),c=D("dialog",{children:[D("form",{name:"file-picker",events:{submit:e=>{e.preventDefault();const t=e.target.closest("dialog");o(Array.from(new FormData(e.target).getAll("files"))),t.animate instanceof Function?t.animate([{opacity:1},{opacity:0}],{duration:400,easing:"ease-in-out",fill:"both"}).finished.then((()=>t.close())):t.close()},reset:({target:e})=>e.closest("dialog").close()},children:[D("div",{classList:["form-group"],children:[D("label",{text:r,for:a,classList:["input-label","block","required","cursor-pointer"]}),q("files",{id:a,classList:["input"],type:"file",accept:Array.isArray(e)?e.join(", "):e,webkitdirectory:n,required:!0,multiple:t})]}),D("div",{classList:["flex","row","no-wrap"],styles:{"margin-top":"18px",gap:"2em"},children:[D("button",{type:"submit",text:"Ok",classList:["btn","btn-accept","grow-1"]}),D("button",{text:"Cancel",type:"reset",classList:["btn","btn-reject","grow-1"]})]})]})],events:{close:({target:e})=>{s(new DOMException("User cancelled the file select")),e.remove()}}});if(document.body.append(c),c.animate instanceof Function){const e=c.animate([{opacity:.1,transform:"scale(0.3)"},{opacity:1,transform:"none"}],{duration:400,easing:"ease-in-out",fill:"both",delay:100});c.showModal(),e.finished.then((()=>{const e=c.querySelector('input[type="file"]');if(e.showPicker instanceof Function)try{e.showPicker({signal:i})}catch(t){setTimeout((()=>e.click()),200)}else e.click()}))}else{const e=c.querySelector('input[type="file"]');setTimeout((()=>e.click()),200),c.showModal()}i instanceof AbortSignal&&i.addEventListener("abort",(()=>c.close()),{once:!0})}return await a}),{signal:i,mode:"exclusive"})}({accept:[Ae.FILE_EXTENSION,Ae.CONTENT_TYPE]});return await Ae.fromFile(e)}static get CONTENT_TYPE(){return"application/krv-ad+json"}static get FILE_EXTENSION(){return".krvad"}static get VERSION(){return"1.0.0"}}!function(t,n,...r){e?function(...t){return e&&t.every((e=>void 0!==customElements.get(e)))}(t)?(console.warn(new Error(`<${t}> is already defined`)),customElements.get(t)):customElements.define(t,n,...r):console.error(new Error("`customElements` not supported"))}("krv-ad",Ae)}();
//# sourceMappingURL=ad.min.js.map
